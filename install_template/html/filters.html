<div id="atm-products-filters">{% for attr_title, attr_data in context %}	<h4>{{ attr_data.label|lang|escape }}</h4>	{% for key, item in attr_data.params %}		<div class="filter-item">			<label for="{{ attr_title|escape ~ key }}">{{ item.content|escape }}</label>			<input id="{{ attr_title|escape ~ key }}" name="filters[{{ attr_title|escape }}][]" type="checkbox" value="{{ item.id|escape }}"{% if item.checked %} checked="checked" {% endif %}/>		</div>	{% endfor %}{% endfor %}</div><script type="text/javascript">$(function(){	AtomX.shopFiltersString = decodeURIComponent(window.location.search);	$('#atm-products-filters input[type="checkbox"]').unbind('change');	$('#atm-products-filters input[type="checkbox"]').change(function(e){		if ($(e.target).is(':checked')) {			AtomX.shopFiltersString += '&' + $(e.target).attr('name') + '=' + $(e.target).val();		} else {			var regexp = $(e.target).attr('name') + '=' + $(e.target).val();			regexp = new RegExp('\\\&?' + regexp.replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\' + ('/' || '') + '-]', 'g'), '\\$&'));			AtomX.shopFiltersString = AtomX.shopFiltersString.replace(regexp, '');		}				setTimeout(function(){			window.location.search = AtomX.shopFiltersString;		}, 0);	});});</script>